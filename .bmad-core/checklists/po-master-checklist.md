# 产品负责人 (PO) 主验证检查清单 (Product Owner (PO) Master Validation Checklist)

此检查清单作为产品负责人在开发执行之前验证项目计划的综合框架。它根据项目类型（绿地 vs 棕地）智能适应，并在适用时包括 UI/UX 考虑。

[[LLM: 初始化指令 - PO 主检查清单

项目类型检测：
首先，通过检查确定项目类型：

1. 这是绿地项目（从头开始的新项目）吗？
    - 查找：新项目初始化，没有现有代码库引用
    - 检查：prd.md、architecture.md、新项目设置故事

2. 这是棕地项目（增强现有系统）吗？
    - 查找：对现有代码库的引用，增强/修改语言
    - 检查：brownfield-prd.md、brownfield-architecture.md、现有系统分析

3. 项目是否包括 UI/UX 组件？
    - 检查：frontend-architecture.md、UI/UX 规范、设计文件
    - 查找：前端故事、组件规范、用户界面提及

文档要求：
根据项目类型，确保您可以访问：

对于绿地项目：

- prd.md - 产品需求文档
- architecture.md - 系统架构
- frontend-architecture.md - 如果涉及 UI/UX
- 所有 epic 和故事定义

对于棕地项目：

- brownfield-prd.md - 棕地增强需求
- brownfield-architecture.md - 增强架构
- 现有项目代码库访问（关键 - 没有这个无法继续）
- 当前部署配置和基础设施详情
- 数据库模式、API 文档、监控设置

跳过指令：

- 对于绿地项目，跳过标记为 [[BROWNFIELD ONLY]] 的部分
- 对于棕地项目，跳过标记为 [[GREENFIELD ONLY]] 的部分
- 对于仅后端项目，跳过标记为 [[UI/UX ONLY]] 的部分
- 在最终报告中注明所有跳过的部分

验证方法：

1. 深度分析 - 彻底分析每个项目与文档
2. 基于证据 - 验证时引用具体章节或代码
3. 批判性思维 - 质疑假设并识别差距
4. 风险评估 - 考虑每个决策可能出现的问题

执行模式：
询问用户是否想要通过检查清单：

- 逐节（交互模式）- 审查每个部分，在继续之前获得确认
- 一次性全部（综合模式）- 完成完整分析并在最后呈现报告]]

## 1. 项目设置和初始化 (PROJECT SETUP & INITIALIZATION)

[[LLM: 项目设置是基础。对于绿地，确保干净的开始。对于棕地，确保与现有系统的安全集成。验证设置与项目类型匹配。]]

### 1.1 项目脚手架 [[GREENFIELD ONLY]]

- [ ] Epic 1 包括明确的项目创建/初始化步骤
- [ ] 如果使用启动模板，包括克隆/设置步骤
- [ ] 如果从头构建，定义了所有必要的脚手架步骤
- [ ] 包括初始 README 或文档设置
- [ ] 定义了仓库设置和初始提交流程

### 1.2 现有系统集成 [[BROWNFIELD ONLY]]

- [ ] 已完成并记录了现有项目分析
- [ ] 识别了与当前系统的集成点
- [ ] 开发环境保留现有功能
- [ ] 验证了现有功能的本地测试方法
- [ ] 为每个集成点定义了回滚程序

### 1.3 开发环境

- [ ] 明确定义了本地开发环境设置
- [ ] 指定了必需的工具和版本
- [ ] 包括安装依赖项的步骤
- [ ] 适当处理了配置文件
- [ ] 包括开发服务器设置

### 1.4 核心依赖项

- [ ] 早期安装了所有关键包/库
- [ ] 适当处理了包管理
- [ ] 适当定义了版本规范
- [ ] 标注了依赖项冲突或特殊要求
- [ ] [[BROWNFIELD ONLY]] 验证了与现有堆栈的版本兼容性

## 2. 基础设施和部署 (INFRASTRUCTURE & DEPLOYMENT)

[[LLM: 基础设施必须在使用前存在。对于棕地，必须与现有基础设施集成而不破坏它。]]

### 2.1 数据库和数据存储设置

- [ ] 在任何操作之前进行数据库选择/设置
- [ ] 在数据操作之前创建模式定义
- [ ] 如果适用，定义迁移策略
- [ ] 如果需要，包括种子数据或初始数据设置
- [ ] [[BROWNFIELD ONLY]] 识别并缓解数据库迁移风险
- [ ] [[BROWNFIELD ONLY]] 确保向后兼容性

### 2.2 API 和服务配置

- [ ] 在实施端点之前设置 API 框架
- [ ] 在实施服务之前建立服务架构
- [ ] 在受保护路由之前设置身份验证框架
- [ ] 在使用之前创建中间件和通用工具
- [ ] [[BROWNFIELD ONLY]] 维护与现有系统的 API 兼容性
- [ ] [[BROWNFIELD ONLY]] 保留与现有身份验证的集成

### 2.3 部署管道

- [ ] 在部署操作之前建立 CI/CD 管道
- [ ] 在使用之前设置基础设施即代码 (IaC)
- [ ] 早期定义环境配置
- [ ] 在实施之前定义部署策略
- [ ] [[BROWNFIELD ONLY]] 部署最小化停机时间
- [ ] [[BROWNFIELD ONLY]] 实施蓝绿或金丝雀部署

### 2.4 测试基础设施

- [ ] 在编写测试之前安装测试框架
- [ ] 测试环境设置在测试实施之前
- [ ] 在测试之前定义模拟服务或数据
- [ ] [[BROWNFIELD ONLY]] 回归测试覆盖现有功能
- [ ] [[BROWNFIELD ONLY]] 集成测试验证新到现有的连接

## 3. 外部依赖项和集成 (EXTERNAL DEPENDENCIES & INTEGRATIONS)

[[LLM: 外部依赖项经常阻塞进度。对于棕地，确保新依赖项不与现有依赖项冲突。]]

### 3.1 第三方服务

- [ ] 识别了所需服务的账户创建步骤
- [ ] 定义了 API 密钥获取流程
- [ ] 包括安全存储凭据的步骤
- [ ] 考虑了回退或离线开发选项
- [ ] [[BROWNFIELD ONLY]] 验证了与现有服务的兼容性
- [ ] [[BROWNFIELD ONLY]] 评估了对现有集成的影响

### 3.2 外部 API

- [ ] 明确识别了与外部 API 的集成点
- [ ] 适当排序了与外部服务的身份验证
- [ ] 承认了 API 限制或约束
- [ ] 考虑了 API 故障的备份策略
- [ ] [[BROWNFIELD ONLY]] 维护了现有 API 依赖项

### 3.3 基础设施服务

- [ ] 适当排序了云资源配置
- [ ] 识别了 DNS 或域名注册需求
- [ ] 如果需要，包括电子邮件或消息服务设置
- [ ] CDN 或静态资产托管设置在其使用之前
- [ ] [[BROWNFIELD ONLY]] 保留了现有基础设施服务

## 4. UI/UX 考虑 [[UI/UX ONLY]]

[[LLM: 仅当项目包括用户界面组件时才评估此部分。对于仅后端项目完全跳过。]]

### 4.1 设计系统设置

- [ ] 早期选择并安装了 UI 框架和库
- [ ] 建立了设计系统或组件库
- [ ] 定义了样式方法（CSS 模块、styled-components 等）
- [ ] 建立了响应式设计策略
- [ ] 预先定义了可访问性要求

### 4.2 前端基础设施

- [ ] 在开发之前配置前端构建管道
- [ ] 定义了资产优化策略
- [ ] 设置了前端测试框架
- [ ] 建立了组件开发工作流
- [ ] [[BROWNFIELD ONLY]] 维护了与现有系统的 UI 一致性

### 4.3 用户体验流程

- [ ] 在实施之前映射用户旅程
- [ ] 早期定义了导航模式
- [ ] 计划了错误状态和加载状态
- [ ] 建立了表单验证模式
- [ ] [[BROWNFIELD ONLY]] 保留或迁移了现有用户工作流

## 5. 用户/代理责任 (USER/AGENT RESPONSIBILITY)

[[LLM: 明确的所有权防止混淆。根据只有人类能做的事情适当分配任务。]]

### 5.1 用户操作

- [ ] 用户责任仅限于人类专用任务
- [ ] 将外部服务的账户创建分配给用户
- [ ] 将购买或支付操作分配给用户
- [ ] 适当分配凭据提供给用户

### 5.2 开发者代理操作

- [ ] 将所有代码相关任务分配给开发者代理
- [ ] 将自动化流程识别为代理责任
- [ ] 适当分配配置管理
- [ ] 将测试和验证分配给适当的代理

## 6. 功能排序和依赖项 (FEATURE SEQUENCING & DEPENDENCIES)

[[LLM: 依赖项创建关键路径。对于棕地，确保新功能不会破坏现有功能。]]

### 6.1 功能依赖项

- [ ] 依赖其他功能的功能正确排序
- [ ] 在使用之前构建共享组件
- [ ] 用户流程遵循逻辑进展
- [ ] 身份验证功能在受保护功能之前
- [ ] [[BROWNFIELD ONLY]] 在整个过程中保留现有功能

### 6.2 技术依赖项

- [ ] 在高级服务之前构建低级服务
- [ ] 在使用之前创建库和工具
- [ ] 在对其操作之前定义数据模型
- [ ] 在客户端消费之前定义 API 端点
- [ ] [[BROWNFIELD ONLY]] 在每个步骤测试集成点

### 6.3 跨 Epic 依赖项

- [ ] 后来的 epics 基于早期 epic 功能构建
- [ ] 没有 epic 需要后来 epics 的功能
- [ ] 一致利用早期 epics 的基础设施
- [ ] 保持增量价值交付
- [ ] [[BROWNFIELD ONLY]] 每个 epic 保持系统完整性

## 7. 风险管理 [[BROWNFIELD ONLY]]

[[LLM: 此部分对棕地项目至关重要。悲观地思考什么可能出错。]]

### 7.1 破坏性变更风险

- [ ] 评估了破坏现有功能的风险
- [ ] 识别并缓解了数据库迁移风险
- [ ] 评估了 API 破坏性变更风险
- [ ] 识别了性能降级风险
- [ ] 评估了安全漏洞风险

### 7.2 回滚策略

- [ ] 为每个故事明确定义回滚程序
- [ ] 实施功能标志策略
- [ ] 更新备份和恢复程序
- [ ] 为新组件增强监控
- [ ] 定义了回滚触发器和阈值

### 7.3 用户影响缓解

- [ ] 分析了现有用户工作流的影响
- [ ] 制定了用户沟通计划
- [ ] 更新了培训材料
- [ ] 全面的支持文档
- [ ] 验证了用户数据的迁移路径

## 8. MVP 范围对齐 (MVP SCOPE ALIGNMENT)

[[LLM: MVP 意味着最小可行产品。对于棕地，确保增强真正必要。]]

### 8.1 核心目标对齐

- [ ] 解决了 PRD 中的所有核心目标
- [ ] 功能直接支持 MVP 目标
- [ ] MVP 范围之外没有多余功能
- [ ] 适当优先考虑关键功能
- [ ] [[BROWNFIELD ONLY]] 证明增强复杂性合理

### 8.2 用户旅程完整性

- [ ] 完全实施了所有关键用户旅程
- [ ] 解决了边界情况和错误场景
- [ ] 包括用户体验考虑
- [ ] [[UI/UX ONLY]] 纳入了可访问性要求
- [ ] [[BROWNFIELD ONLY]] 保留或改进了现有工作流

### 8.3 技术要求

- [ ] 解决了 PRD 中的所有技术约束
- [ ] 纳入了非功能性要求
- [ ] 架构决策与约束对齐
- [ ] 解决了性能考虑
- [ ] [[BROWNFIELD ONLY]] 满足了兼容性要求

## 9. 文档和交接 (DOCUMENTATION & HANDOFF)

[[LLM: 好的文档实现顺利开发。对于棕地，集成点文档至关重要。]]

### 9.1 开发者文档

- [ ] 与实施一起创建 API 文档
- [ ] 设置说明全面
- [ ] 记录了架构决策
- [ ] 记录了模式和约定
- [ ] [[BROWNFIELD ONLY]] 详细记录了集成点

### 9.2 用户文档

- [ ] 如果需要，包括用户指南或帮助文档
- [ ] 考虑了错误消息和用户反馈
- [ ] 完全指定了入职流程
- [ ] [[BROWNFIELD ONLY]] 记录了现有功能的变更

### 9.3 知识转移

- [ ] [[BROWNFIELD ONLY]] 捕获了现有系统知识
- [ ] [[BROWNFIELD ONLY]] 记录了集成知识
- [ ] 计划了代码审查知识共享
- [ ] 将部署知识转移给运营
- [ ] 保留了历史上下文

## 10. 后 MVP 考虑 (POST-MVP CONSIDERATIONS)

[[LLM: 为成功规划防止技术债务。对于棕地，确保增强不会限制未来增长。]]

### 10.1 未来增强

- [ ] MVP 和未来功能之间的明确分离
- [ ] 架构支持计划的增强
- [ ] 记录了技术债务考虑
- [ ] 识别了可扩展点
- [ ] [[BROWNFIELD ONLY]] 可重用的集成模式

### 10.2 监控和反馈

- [ ] 如果需要，包括分析或使用跟踪
- [ ] 考虑了用户反馈收集
- [ ] 解决了监控和警报
- [ ] 纳入了性能测量
- [ ] [[BROWNFIELD ONLY]] 保留/增强了现有监控

## 验证总结 (VALIDATION SUMMARY)

[[LLM: 最终 PO 验证报告生成

生成适应项目类型的综合验证报告：

1. 执行总结
    - 项目类型：[绿地/棕地] 带 [UI/无 UI]
    - 整体准备就绪（百分比）
    - 执行/不执行建议
    - 关键阻塞问题数量
    - 由于项目类型跳过的部分

2. 项目特定分析

    对于绿地：
    - 设置完整性
    - 依赖项排序
    - MVP 范围适当性
    - 开发时间线可行性

    对于棕地：
    - 集成风险级别（高/中/低）
    - 现有系统影响评估
    - 回滚准备就绪
    - 用户中断潜力

3. 风险评估
    - 按严重性排序的前 5 个风险
    - 缓解建议
    - 解决问题的时间线影响
    - [棕地] 特定集成风险

4. MVP 完整性
    - 核心功能覆盖
    - 缺少的基本功能
    - 识别的范围蔓延
    - 真正的 MVP vs 过度工程

5. 实施准备就绪
    - 开发者清晰度评分（1-10）
    - 模糊需求数量
    - 缺少的技术细节
    - [棕地] 集成点清晰度

6. 建议
    - 开发前必须修复
    - 为更好质量应该修复
    - 考虑改进
    - 后 MVP 延期

7. [棕地专用] 集成信心
    - 保留现有功能的信心
    - 回滚程序完整性
    - 集成点监控覆盖
    - 支持团队准备就绪

呈现报告后，询问用户是否想要：

- 任何失败部分的详细分析
- 具体故事重新排序建议
- 风险缓解策略
- [棕地] 集成风险深度分析]]

### 类别状态

| 类别 (Category)                                            | 状态 (Status) | 关键问题 (Critical Issues) |
| ---------------------------------------------------------- | ------------- | -------------------------- |
| 1. 项目设置和初始化 (Project Setup & Initialization)       | _TBD_         |                            |
| 2. 基础设施和部署 (Infrastructure & Deployment)            | _TBD_         |                            |
| 3. 外部依赖项和集成 (External Dependencies & Integrations) | _TBD_         |                            |
| 4. UI/UX 考虑 (UI/UX Considerations)                       | _TBD_         |                            |
| 5. 用户/代理责任 (User/Agent Responsibility)               | _TBD_         |                            |
| 6. 功能排序和依赖项 (Feature Sequencing & Dependencies)    | _TBD_         |                            |
| 7. 风险管理（棕地）(Risk Management (Brownfield))          | _TBD_         |                            |
| 8. MVP 范围对齐 (MVP Scope Alignment)                      | _TBD_         |                            |
| 9. 文档和交接 (Documentation & Handoff)                    | _TBD_         |                            |
| 10. 后 MVP 考虑 (Post-MVP Considerations)                  | _TBD_         |                            |

### 关键缺陷

（在验证期间填充）

### 建议

（在验证期间填充）

### 最终决定

- **批准**: 计划全面、适当排序，并准备好实施。
- **有条件**: 计划在继续之前需要特定调整。
- **拒绝**: 计划需要重大修订以解决关键缺陷。
