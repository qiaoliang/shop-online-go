# 创建 Brownfield 故事任务(Create Brownfield Story Task)

## 目的(Purpose)

为可在一次聚焦开发会话中完成的非常小的 brownfield 增强创建单一用户故事。此任务适用于需要现有系统集成意识的最小添加或 bug 修复。

## 何时使用此任务(When to Use This Task)

**在以下情况使用此任务：**

- 增强可在单一故事中完成
- 不需要新架构或重大设计
- 变更完全遵循现有模式
- 集成直接且风险最小
- 变更隔离且有明确边界

**在以下情况使用 brownfield-create-epic：**

- 增强需要 2-3 个协调的故事
- 需要一些设计工作
- 涉及多个集成点

**在以下情况使用完整 brownfield PRD/架构流程：**

- 增强需要多个协调的故事
- 需要架构规划
- 需要重大集成工作

## 指令(Instructions)

### 1. 快速项目评估(Quick Project Assessment)

收集现有项目的最小但必要的上下文：

**当前系统上下文：**

- [ ] 相关现有功能已识别
- [ ] 此区域的技术栈已记录
- [ ] 集成点清晰理解
- [ ] 类似工作的现有模式已识别

**变更范围：**

- [ ] 具体变更明确定义
- [ ] 影响边界已识别
- [ ] 成功标准已建立

### 2. 故事创建(Story Creation)

按以下结构创建单一聚焦故事：

#### 故事标题(Story Title)

{{具体增强}} - Brownfield 添加

#### 用户故事(User Story)

作为 {{用户类型}}，
我想要 {{具体行动/能力}}，
以便 {{清晰利益/价值}}。

#### 故事上下文(Story Context)

**现有系统集成：**

- 与以下集成：{{现有组件/系统}}
- 技术：{{相关技术栈}}
- 遵循模式：{{要遵循的现有模式}}
- 接触点：{{具体集成点}}

#### 验收标准(Acceptance Criteria)

**功能要求：**

1. {{主要功能要求}}
2. {{次要功能要求（如有）}}
3. {{集成要求}}

**集成要求：** 4. 现有 {{相关功能}} 继续正常工作不变 5. 新功能遵循现有 {{模式}} 模式 6. 与 {{系统/组件}} 的集成保持当前行为

**质量要求：** 7. 变更由适当测试覆盖 8. 如需要文档已更新 9. 验证现有功能无回归

#### 技术说明(Technical Notes)

- **集成方法：**{{如何连接到现有系统}}
- **现有模式参考：**{{要遵循模式的链接或描述}}
- **关键约束：**{{任何重要限制或要求}}

#### 完成定义(Definition of Done)

- [ ] 功能要求满足
- [ ] 集成要求验证
- [ ] 现有功能回归测试
- [ ] 代码遵循现有模式和标准
- [ ] 测试通过（现有和新）
- [ ] 如适用文档已更新

### 3. 风险和兼容性检查(Risk and Compatibility Check)

**最小风险评估：**

- **主要风险：**{{对现有系统的主要风险}}
- **缓解：**{{简单缓解方法}}
- **回滚：**{{如需要如何撤销}}

**兼容性验证：**

- [ ] 对现有 API 无破坏性变更
- [ ] 数据库变更（如有）仅为添加
- [ ] UI 变更遵循现有设计模式
- [ ] 性能影响可忽略

### 4. 验证清单(Validation Checklist)

最终确定故事前，确认：

**范围验证：**

- [ ] 故事可在一次开发会话中完成
- [ ] 集成方法直接
- [ ] 完全遵循现有模式
- [ ] 不需要设计或架构工作

**清晰度检查：**

- [ ] 故事要求明确
- [ ] 集成点明确指定
- [ ] 成功标准可测试
- [ ] 回滚方法简单

## 成功标准(Success Criteria)

故事创建成功时：

1. 增强明确定义且范围适合单一会话
2. 集成方法直接且低风险
3. 现有系统模式已识别并将遵循
4. 回滚计划简单且可行
5. 验收标准包括现有功能验证

## 重要说明(Important Notes)

- 此任务仅用于非常小的 brownfield 变更
- 如分析期间复杂度增加，升级到 brownfield-create-epic
- 始终优先考虑现有系统完整性
- 对集成复杂度有疑问时，使用 brownfield-create-epic
- 故事应不超过 4 小时聚焦开发工作
