# 索引文档任务(Index Documentation Task)

## 目的(Purpose)

本任务通过扫描所有文档文件，维护 `docs/index.md` 文件的完整性和完整性，确保它们都被正确索引并带有描述。它同时处理根级文档和子文件夹内的文档，并以分层方式组织。

## 任务指令(Task Instructions)

你现在作为文档索引员操作。你的目标是确保所有文档文件都被正确地编目到中央索引中，并对子文件夹进行适当组织。

### 必需步骤(Required Steps)

1. 首先，定位并扫描：
    - `docs/` 目录及其所有子目录
    - 现有的 `docs/index.md` 文件（如果不存在则创建）
    - 文档结构中的所有 markdown（`.md`）和文本（`.txt`）文件
    - 记录文件夹结构以便分层组织

2. 对于现有的 `docs/index.md`：
    - 解析当前条目
    - 记录现有文件引用和描述
    - 识别任何断链或缺失文件
    - 跟踪已索引内容
    - 保留现有文件夹部分

3. 对于找到的每个文档文件：
    - 提取标题（来自第一个标题或文件名）
    - 通过分析内容生成简要描述
    - 创建指向文件的相对 markdown 链接
    - 检查是否已在索引中
    - 记录其所属文件夹（如在子文件夹中）
    - 如缺失或过时，准备更新

4. 对于索引中发现的任何缺失或不存在的文件：
    - 列出所有引用不存在文件的条目
    - 对每个条目：
        - 显示完整条目详情（标题、路径、描述）
        - 在移除前请求明确确认
        - 如文件已移动，提供更新路径选项
        - 记录决策（移除/更新/保留）以供最终报告

5. 更新 `docs/index.md`：
    - 保持现有结构和组织
    - 为每个子文件夹创建二级章节（`##`）
    - 先列出根级文档
    - 添加缺失条目及描述
    - 更新过时条目
    - 仅移除已确认移除的条目
    - 确保格式一致

### 索引结构格式(Index Structure Format)

索引应按如下方式组织：

```markdown
# 文档索引(Documentation Index)

## 根文档(Root Documents)

### [文档标题](./document.md)

文档用途和内容的简要描述。

### [另一个文档](./another.md)

此处为描述。

## 文件夹名称(Folder Name)

`folder-name/` 目录下的文档：

### [文件夹中的文档](./folder-name/document.md)

该文档的描述。

### [文件夹中的另一个文档](./folder-name/another.md)

此处为描述。

## 另一个文件夹(Another Folder)

`another-folder/` 目录下的文档：

### [嵌套文档](./another-folder/document.md)

嵌套文档的描述。
```

### 索引条目格式(Index Entry Format)

每个条目应遵循以下格式：

```markdown
### [文档标题](relative/path/to/file.md)

文档用途和内容的简要描述。
```

### 操作规则(Rules of Operation)

1. 绝不修改被索引文件内容
2. 当描述足够时保留 index.md 中现有描述
3. 保持索引中的现有分类或分组
4. 所有链接使用相对路径（以 `./` 开头）
5. 确保描述简明但信息充分
6. 未经明确确认绝不移除条目
7. 报告发现的断链或不一致
8. 文件移动时允许更新路径后再考虑移除
9. 文件夹部分用二级标题（`##`）
10. 文件夹按字母排序，根文档优先
11. 每节内文档按标题字母排序

### 过程输出(Process Output)

任务将提供：

1. 对 index.md 所做更改的摘要
2. 新索引文件列表（按文件夹组织）
3. 更新条目列表
4. 提交移除的条目及其状态：
    - 已确认移除
    - 路径已更新
    - 虽然缺失但保留
5. 发现的新文件夹
6. 发现的其他问题或不一致

### 处理缺失文件(Handling Missing Files)

对于索引中引用但文件系统中未找到的每个文件：

1. 呈现条目：

    ```markdown
    检测到缺失文件：
    标题: [文档标题]
    路径: relative/path/to/file.md
    描述: 现有描述
    部分: [根文档 | 文件夹名称]

    选项：

    1. 移除此条目
    2. 更新文件路径
    3. 保留条目（标记为暂时不可用）

    请选择一个选项（1/2/3）：
    ```

2. 在采取任何操作前等待用户确认
3. 记录决策以供最终报告

### 特殊情况(Special Cases)

1. **分片文档**：如文件夹包含 `index.md`，视为分片文档：
    - 用文件夹的 `index.md` 标题作为章节标题
    - 列出文件夹内文档为子节
    - 在描述中注明这是多部分文档

2. **README 文件**：将 `README.md` 转换为更具描述性的标题（基于内容）

3. **嵌套子文件夹**：对于深层嵌套文件夹，在主索引中保持两级结构。更深结构应有自己的索引文件。

## 所需输入(Required Input)

请提供：

1. `docs/` 目录位置（默认：`./docs`）
2. 对 `docs/index.md` 的写入权限确认
3. 任何特定分类偏好
4. 需要排除的文件或目录（如 `.git`、`node_modules`）
5. 是否包含以 `.` 开头的隐藏文件/文件夹

是否要继续文档索引？请提供上述所需输入。
