# 项目结构

## 项目模块划分
本项目按照功能领域进行模块划分，每个模块负责特定的业务功能，并通过独立的包进行组织。主要模块包括：

- **addresses**: 用户收货地址管理
- **banner**: 广告（Banner）管理
- **configs**: 项目配置管理，包括数据库连接等
- **goods**: 商品管理，包括书籍、商品分类、商品项和SKU等
- **order**: 订单管理
- **routers**: 路由配置，定义API接口和对应的处理函数
- **security**: 安全相关功能，如验证码
- **shoppingcart**: 购物车管理
- **user**: 用户管理
- **utils**: 通用工具函数
- **testutils**: 测试工具函数

## 代码组织结构
项目采用典型的Go项目结构，主要目录及其作用如下：

```
shop-online-go/
├── app/                  # 核心业务逻辑代码
│   ├── addresses/        # 收货地址模块
│   ├── banner/           # 广告模块
│   ├── configs/          # 配置模块
│   ├── goods/            # 商品模块
│   ├── order/            # 订单模块
│   ├── routers/          # 路由定义
│   ├── security/         # 安全模块
│   ├── shoppingcart/     # 购物车模块
│   ├── testutils/        # 测试工具
│   ├── user/             # 用户模块
│   └── utils/            # 通用工具
├── dbscripts/            # 数据库迁移脚本
├── docs/                 # 项目文档 (当前正在生成)
├── initData/             # 初始化数据文件
├── static/               # 静态资源文件，如图片
├── main.go               # 项目入口文件
├── go.mod                # Go模块定义文件
├── config.yaml           # 配置文件
├── API-Doc.md            # 外部API文档 (待整合或参考)
├── README.md             # 项目说明
└── ...                   # 其他文件和目录
```

## 关键包说明

- **`app/configs`**: 负责加载和管理应用程序的配置，如数据库连接信息、端口等。通过`viper`库实现配置的读取和管理。
- **`app/routers`**: 集中管理所有HTTP API路由的定义。使用`gin`框架构建路由，并将请求分发到各个业务模块的处理函数。
- **`app/user`**: 包含用户相关的业务逻辑，如用户注册、登录、信息查询、修改以及收货地址管理。通常包含`handler`、`service`和`repository`层。
- **`app/goods`**: 负责商品相关的业务逻辑，包括商品分类、商品详情、SKU管理等。同样包含`handler`、`service`和`repository`层。
- **`app/shoppingcart`**: 处理购物车相关的业务逻辑，如添加商品到购物车、修改商品数量、查询购物车信息等。
- **`dbscripts`**: 存放数据库的初始化和迁移脚本，用于管理数据库结构和基础数据。

## 分层架构说明
本项目采用经典的三层架构模式：

1.  **表现层 (Handler/Controller)**: 位于`app/*/handler.go`文件中，负责接收HTTP请求，进行参数校验，调用服务层处理业务逻辑，并返回HTTP响应。主要使用`gin`框架。
2.  **业务逻辑层 (Service)**: 位于`app/*/service.go`文件中，负责处理核心业务逻辑，协调多个领域对象完成复杂操作。它不直接与数据库交互，而是通过调用数据访问层来获取或持久化数据。
3.  **数据访问层 (Repository)**: 位于`app/*/repo.go`或`app/*/repoDB.go`文件中，负责与数据库进行交互，实现数据的增删改查。通常使用GORM等ORM库来简化数据库操作。

这种分层结构有助于提高代码的可维护性、可测试性和可扩展性，使各层职责分离，降低耦合度。